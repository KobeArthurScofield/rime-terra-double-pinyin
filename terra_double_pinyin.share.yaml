# Rime schema
# encoding: utf-8


engines:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@stroke
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - script_translator
    - table_translator@stroke
  filters:
    - simplifier
    - uniquifier
    - reverse_lookup_filter@double_pinyin_reverse_lookup

translator:
  enable_sentence: true
  enable_user_dict: true
  dictionary: terra_pinyin
  spelling_hints: 8
  always_show_comments: true
  contextual_suggestions: true
  comment_format:
    __include: /comment_fmt/main

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "`[a-z]*'?$"

stroke:
  tag: stroke
  dictionary: stroke
  prefix: "`"
  suffix: ";"
  tips: 〔筆畫〕
  preedit_format:
    - xlit/hspnz/一丨丿丶乙/

double_pinyin_reverse_lookup:
  tags: [ stroke ]
  overwrite_comment: false
  dictionary: terra_pinyin
  comment_format:
    __include: /comment_fmt/main

menu:
  page_size: 9

comment_fmt:
  main:
    - xform ([aeiou])(ng?|r)([1234]) $1$3$2
    - xform ([aeo])([iuoh])([1234]) $1$3$2
    - xform a1 ā
    - xform a2 á
    - xform a3 ǎ
    - xform a4 à
    - xform e1 ē
    - xform e2 é
    - xform e3 ě
    - xform e4 è
    - xform o1 ō
    - xform o2 ó
    - xform o3 ǒ
    - xform o4 ò
    - xform i1 ī
    - xform i2 í
    - xform i3 ǐ
    - xform i4 ì
    - xform u1 ū
    - xform u2 ú
    - xform u3 ǔ
    - xform u4 ù
    - xform v1 ǖ
    - xform v2 ǘ
    - xform v3 ǚ
    - xform v4 ǜ
    - xform/([nljqxy])v/$1ü/
    - xform/eh[0-5]?/ê/
    - xform/([a-z]+)[0-5]/$1/
